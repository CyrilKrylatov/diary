<!DOCTYPE html><html class="post"><head><meta charset="utf-8"><title>_kud.diary &#x2014; Python and BROWSER environment variable are not friends (yet?)</title><meta name="description" content="Diary of the _kud"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta property="og:title" content="Python and BROWSER environment variable are not friends (yet?)"><meta property="og:image" content="http://diary.kud.io/images/python-bug-browser-variable/cover.gif"><link rel="shortcut icon" type="image/png" href="http://kud.io/favicon.png"><link rel="stylesheet" href="/index.css"></head><body><div class="kud-Banner"><script></script><a class="kud-Banner-link" href="/en/">Back to home</a></div><div class="kud-Wrapper"><section class="kud-Post kud-Text--wowLink animated fadeIn"><div class="kud-PostHeader"><span class="kud-PostHeader-decorator"><img class="kud-PostHeader-img" src="/images/python-bug-browser-variable/cover.gif"></span><div class="kud-PostHeader-overlay"><div class="kud-PostHeader-wrapper"><h2 class="kud-PostHeader-heading" id="python-and-browser-environment-variable-are-not-friends-yet"><a class="kud-Anchor" href="#python-and-browser-environment-variable-are-not-friends-yet"><span></span></a><a href="">Python and BROWSER environment variable are not friends (yet?)</a></h2><time class="kud-PostHeader-date hint--bottom" data-hint="4 years ago">Wednesday 30th December 2015</time></div></div></div><div class="kud-Post-content"><p>Yesterday I wanted to use <a href="https://packagecontrol.io/packages/HTML-CSS-JS%20Prettify">HTML-CSS-JS Prettify</a> on my Sublime Text, and it didn&#x2019;t work. I opened the console and I saw this:</p>
<p><code>AttributeError: &apos;MacOSXOSAScript&apos; object has no attribute &apos;basename&apos;.</code></p>
<p>Oh but? It wasn&#x2019;t the first time I had this error and I didn&#x2019;t know why: on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1012443">Firefox</a>, and on <a href="https://github.com/mkdocs/mkdocs/issues/465">MkDocs</a>.</p>
<p>So where does this bug come from? It comes from <code>webbrowser</code> python lib.</p>
<p>You just have to start <code>$ python -c &apos;import webbrowser; webbrowser.open(&quot;http://kud.io&quot;)&apos;</code> to get it.</p>
<p>See the tracelog:</p>
<pre><code class="hljs bash">Traceback (most recent call last):
  File <span class="hljs-string">&quot;&lt;string&gt;&quot;</span>, line 1, <span class="hljs-keyword">in</span> &lt;module&gt;
  File <span class="hljs-string">&quot;/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/webbrowser.py&quot;</span>, line 669, <span class="hljs-keyword">in</span> &lt;module&gt;
    cmd = _synthesize(cmdline, -1)
  File <span class="hljs-string">&quot;/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/webbrowser.py&quot;</span>, line 94, <span class="hljs-keyword">in</span> _synthesize
    <span class="hljs-keyword">if</span> controller and name.lower() == controller.basename:
AttributeError: <span class="hljs-string">&apos;MacOSXOSAScript&apos;</span> object has no attribute <span class="hljs-string">&apos;basename&apos;</span></code></pre>

<p>And why do you get that so? Because you defined the BROWSER environment variable, like this for instance:</p>
<pre><code class="hljs bash"><span class="hljs-built_in">export</span> FIREFOXNIGHTLY_BIN=<span class="hljs-string">&quot;/Applications/FirefoxNightly.app/Contents/MacOS/firefox&quot;</span>
<span class="hljs-built_in">export</span> BROWSER=<span class="hljs-variable">$FIREFOXNIGHTLY_BIN</span></code></pre>

<p>It&#x2019;s already <a href="https://bugs.python.org/issue24955">logged and will be fixed</a> but for the moment either you <strong>patch your <a href="https://github.com/python-git/python/blob/master/Lib/webbrowser.py#L94">webbrowser.py</a></strong> or you <strong><a href="https://github.com/kud/my/commit/b78b46441a64c185a6178d3bd707e22b9a236cb7">comment the export of BROWSER</a></strong>.</p>
</div><div id="disqus_thread"></div><script>//- var disqus_config = function () {
//-   this.page.url = PAGE_URL;
//-   this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
//- }

(function() {
    var d = document, s = d.createElement('script');
    s.src = '//kuddiary.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();</script><noscript><p>No JavaScript, no comments.</p></noscript></section><div class="kud-Footer kud-Text--wowLink"><ul class="kud-Footer-list"><li class="kud-Footer-listItem"><a class="kud-Footer-listLink" href="http://kud.io">Homepage</a></li><li class="kud-Footer-listItem"><a class="kud-Footer-listLink" href="http://instagram.kud.io">Instagram</a></li><li class="kud-Footer-listItem"><a class="kud-Footer-listLink" href="http://twitter.kud.io">Twitter</a></li><li class="kud-Footer-listItem"><a class="kud-Footer-listLink" href="/fr/">Je parle fran&#xE7;ais</a></li></ul></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-71841668-1', 'auto');
ga('send', 'pageview');</script></body></html>